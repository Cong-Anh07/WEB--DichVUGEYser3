var r;(r=document.getElementById("loginForm"))==null||r.addEventListener("submit",function(n){n.preventDefault();const t=document.getElementById("username").value,s=document.getElementById("password").value;if(!t||!s){o("Vui lòng điền đầy đủ thông tin!","error");return}fetch("/api/user/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:t,pass:s})}).then(e=>e.json()).then(e=>{e.code===1&&e.data?(sessionStorage.setItem("currentUser",JSON.stringify(e.data)),sessionStorage.setItem("loginTime",new Date().toISOString()),o("Đăng nhập thành công!","success"),setTimeout(()=>window.location.href="./index.html",1e3)):o(e.message||"Số điện thoại hoặc mật khẩu không đúng!","error")}).catch(()=>o("Lỗi kết nối. Vui lòng thử lại!","error"))});var c;(c=document.querySelector(".toggle-password"))==null||c.addEventListener("click",function(){const n=document.getElementById("password"),t=this.querySelector("i");n.type=n.type==="password"?"text":"password",t.classList.toggle("fa-eye"),t.classList.toggle("fa-eye-slash")});function o(n,t="info"){var i;(i=document.querySelector(".alert"))==null||i.remove();const s={success:"#28a745",error:"#dc3545",warning:"#ffc107",info:"#17a2b8"},e=document.createElement("div");e.className=`alert alert-${t}`,e.innerHTML=`<span>${n}</span>`,e.style.cssText=`position:fixed;top:20px;right:20px;padding:1rem;border-radius:8px;color:white;z-index:9999;background:${s[t]}`,document.body.appendChild(e),setTimeout(()=>e.remove(),3e3)}function a(){confirm("Bạn có chắc chắn muốn đăng xuất?")&&(sessionStorage.clear(),window.location.href="./login.html")}window.authFunctions={showAlert:o,logout:a};
